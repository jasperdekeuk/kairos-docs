<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Reference/auroraboot" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">AuroraBoot | Kairos</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kairos.io/kairos-docs/img/Kairos_800x419.png"><meta data-rh="true" name="twitter:image" content="https://kairos.io/kairos-docs/img/Kairos_800x419.png"><meta data-rh="true" property="og:url" content="https://kairos.io/kairos-docs/docs/next/Reference/auroraboot"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="AuroraBoot | Kairos"><meta data-rh="true" name="description" content="Reference documentation for AuroraBoot, a tool for generating bootable images"><meta data-rh="true" property="og:description" content="Reference documentation for AuroraBoot, a tool for generating bootable images"><link data-rh="true" rel="icon" href="/kairos-docs/img/logo.svg"><link data-rh="true" rel="canonical" href="https://kairos.io/kairos-docs/docs/next/Reference/auroraboot"><link data-rh="true" rel="alternate" href="https://kairos.io/kairos-docs/docs/next/Reference/auroraboot" hreflang="en"><link data-rh="true" rel="alternate" href="https://kairos.io/kairos-docs/docs/next/Reference/auroraboot" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Reference","item":"https://kairos.io/kairos-docs/docs/next/category/reference"},{"@type":"ListItem","position":2,"name":"AuroraBoot","item":"https://kairos.io/kairos-docs/docs/next/Reference/auroraboot"}]}</script><link rel="alternate" type="application/rss+xml" href="/kairos-docs/blog/rss.xml" title="Kairos RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/kairos-docs/blog/atom.xml" title="Kairos Atom Feed">




<script src="https://buttons.github.io/buttons.js" async defer="defer"></script><link rel="stylesheet" href="/kairos-docs/assets/css/styles.c9791132.css">
<script src="/kairos-docs/assets/js/runtime~main.32d1f2f4.js" defer="defer"></script>
<script src="/kairos-docs/assets/js/main.a6b903dc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/kairos-docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kairos-docs/"><div class="navbar__logo"><img src="/kairos-docs/img/logo.svg" alt="Kairos Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/kairos-docs/img/logo.svg" alt="Kairos Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Kairos</b></a><a class="navbar__item navbar__link" href="/kairos-docs/docs/getting-started">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/kairos-docs/docs/next/getting-started/">Documentation</a><a class="navbar__item navbar__link" href="/kairos-docs/blog">Blog</a><a href="https://kairos.io/community/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/kairos-docs/docs/next/Reference/auroraboot">Next ðŸš§</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/kairos-docs/docs/next/Reference/auroraboot">Next ðŸš§</a></li><li><a class="dropdown__link" href="/kairos-docs/docs/3.6.0/Reference/auroraboot">3.6.0 (Latest)</a></li><li><a class="dropdown__link" href="/kairos-docs/docs/3.5.7/Reference/auroraboot">3.5.7</a></li></ul></div><div class="navbar__item"><a class="github-button" href="https://github.com/kairos-io/kairos" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star kairos-io/kairos on GitHub">Star</a></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/kairos-docs/docs/next/getting-started/"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/kairos-docs/docs/next/category/installation"><span title="Installation" class="categoryLinkLabel_W154">Installation</span></a><button aria-label="Expand sidebar category &#x27;Installation&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/kairos-docs/docs/next/category/architecture"><span title="Architecture" class="categoryLinkLabel_W154">Architecture</span></a><button aria-label="Expand sidebar category &#x27;Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/kairos-docs/docs/next/category/advanced"><span title="Advanced" class="categoryLinkLabel_W154">Advanced</span></a><button aria-label="Expand sidebar category &#x27;Advanced&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/kairos-docs/docs/next/Upgrade/manual"><span title="Upgrade" class="categoryLinkLabel_W154">Upgrade</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/kairos-docs/docs/next/category/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Collapse sidebar category &#x27;Reference&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/architecture"><span title="Architecture" class="linkLabel_WmDU">Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/artifacts"><span title="Artifact Naming Convention" class="linkLabel_WmDU">Artifact Naming Convention</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/kairos-docs/docs/next/Reference/auroraboot"><span title="AuroraBoot" class="linkLabel_WmDU">AuroraBoot</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/configuration"><span title="Configuration" class="linkLabel_WmDU">Configuration</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/kairosctl"><span title="kairosctl" class="linkLabel_WmDU">kairosctl</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/stage_modules"><span title="Stage modules" class="linkLabel_WmDU">Stage modules</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/kairos-factory"><span title="The Kairos Factory" class="linkLabel_WmDU">The Kairos Factory</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/reset"><span title="Reset" class="linkLabel_WmDU">Reset</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/build-from-scratch"><span title="Build Kairos from scratch" class="linkLabel_WmDU">Build Kairos from scratch</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/build_raw_images_with_qemu"><span title="Build Raw images with QEMU" class="linkLabel_WmDU">Build Raw images with QEMU</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/image_matrix"><span title="Image support matrix" class="linkLabel_WmDU">Image support matrix</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/troubleshooting"><span title="Troubleshooting" class="linkLabel_WmDU">Troubleshooting</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/recovery_mode"><span title="Recovery mode" class="linkLabel_WmDU">Recovery mode</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/entangle"><span title="Entangle" class="linkLabel_WmDU">Entangle</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/faq"><span title="Frequently asked questions" class="linkLabel_WmDU">Frequently asked questions</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/kairos-docs/docs/next/Reference/alerts"><span title="Alerts Styling" class="linkLabel_WmDU">Alerts Styling</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/kairos-docs/docs/next/category/development"><span title="Development" class="categoryLinkLabel_W154">Development</span></a><button aria-label="Expand sidebar category &#x27;Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/kairos-docs/docs/next/Examples/boot_assessment_trusted_boot"><span title="Examples" class="categoryLinkLabel_W154">Examples</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Kairos<!-- --> <b>Next ðŸš§</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/kairos-docs/docs/3.6.0/Reference/auroraboot">latest version</a></b> (<!-- -->3.6.0 (Latest)<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/kairos-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/kairos-docs/docs/next/category/reference"><span>Reference</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">AuroraBoot</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next ðŸš§</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>AuroraBoot</h1></header><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>This is the reference documentation for AuroraBoot. For a complete guide on creating custom cloud images, including how to use AuroraBoot in the context of a full workflow, see <a class="" href="/kairos-docs/docs/next/Reference/creating_custom_cloud_images">Creating Custom Cloud Images</a>.</p></div></div>
<p><strong>AuroraBoot</strong> is a tool designed to make the process of bootstrapping Kairos machines quick, simple and efficient. It is specifically designed for the Kairos operating system and provides a comprehensive solution for downloading required artifacts and provisioning a machine, both from network or manually via flashing to USB stick.</p>
<p>With AuroraBoot, you can prepare the environment for network-based bootstrapping, download the necessary release assets, and also customize the installation media for USB-based mass-installations. Whether you&#x27;re looking to install Kairos on a single machine or multiple machines, AuroraBoot makes it easy and efficient.</p>
<p>AuroraBoot can be useful to:</p>
<ul>
<li class="">prepare multiple-nodes in a lab before shipment</li>
<li class="">offer a simple, intuitive and streamlined way to deploy Kairos automatically and manually</li>
<li class="">deploy Kairos nodes in a network segment where we can already send workload to (running AuroraBoot in an already-existing downstream cluster)</li>
<li class="">build artifacts of any type (isos, Trusted Boot, container upgrades, raw images, cloud images)</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/2420543/217617696-f993a8e3-55ac-4d3e-98f0-c2317cb54cb9.png" alt="AuroraBoot" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="scope">Scope<a href="#scope" class="hash-link" aria-label="Direct link to Scope" title="Direct link to Scope" translate="no">â€‹</a></h2>
<p><strong>AuroraBoot</strong> has the following scope:</p>
<ul>
<li class=""><strong>Download</strong> release assets in order to provision one or more machines</li>
<li class=""><strong>Prepare</strong> automatically the environment to boot from network</li>
<li class=""><strong>Provision</strong> machines from network with a version of Kairos and cloud config</li>
<li class=""><strong>Customize</strong> The installation media for installations from USB</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">â€‹</a></h2>
<ul>
<li class=""><code>docker</code> or a container engine of your choice</li>
</ul>
<p>For netbooting:</p>
<ul>
<li class="">Port <code>8090</code>, <code>8080</code> and <code>67</code> free on the host running AuroraBoot</li>
<li class="">The machine running AuroraBoot have to be on the same network segment of the nodes to be bootstrapped</li>
<li class="">The nodes need to be configured to boot over network, or be capable of booting via USB for offline mode</li>
<li class=""><code>ProxyDHCP</code> supported by the <code>DHCP</code> network attempting to netboot (see also <a href="https://github.com/danderson/netboot/blob/master/pixiecore/README.booting#step-1-dhcpproxydhcp" target="_blank" rel="noopener noreferrer" class="">pixiecore architecture</a>).
There should be an already running <code>DHCP</code> server on your network. AuroraBoot doesn&#x27;t take over the <code>DHCP</code> server, neither require you to do any specific configuration, however a <code>DHCP</code> server which is compliant to <code>ProxyDHCP</code> requests should be present in the same network running <strong>AuroraBoot</strong> and the machines to boot.</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="macos">MacOS<a href="#macos" class="hash-link" aria-label="Direct link to MacOS" title="Direct link to MacOS" translate="no">â€‹</a></h2>
<p>Unfortunately for macOS systems we cannot run the netboot through docker as it&#x27;s run inside a VM, as it can&#x27;t see the host network.
Building ISOs still works as long as you mount the container <code>/tmp</code> disk to a local dir so its exported there like so:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti -v &quot;$PWD&quot;/config.yaml:/config.yaml -v ${PWD}:/tmp quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;artifact_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;release_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;flavor=@flavor&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;flavor_release=@flavorRelease&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;repository=kairos-io/kairos&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --cloud-config /config.yaml</span><br></span></code></pre></div></div>
<p>This will build the ISO and put the generated artifacts in the current dir under the <code>${PWD}/iso</code> dir.</p>
<p>For netboot, we recommend that you run the AuroraBoot binary directly by grabbing it from the <a href="https://github.com/kairos-io/AuroraBoot/releases" target="_blank" rel="noopener noreferrer" class="">releases page</a>.
This requires just one dependency that you can install via <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer" class="">brew</a> with <code>brew install xorriso</code></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="windows">Windows<a href="#windows" class="hash-link" aria-label="Direct link to Windows" title="Direct link to Windows" translate="no">â€‹</a></h2>
<p>Netboot in windows is not supported, only iso creation via the docker image.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" translate="no">â€‹</a></h2>
<p>To run AuroraBoot, simply use <code>docker</code> or the container engine of your choice (such as <code>podman</code>, ...). AuroraBoot images are published in <a href="https://quay.io/repository/kairos/auroraboot" target="_blank" rel="noopener noreferrer" class="">quay</a> and the source code is available <a href="https://github.com/kairos-io/AuroraBoot" target="_blank" rel="noopener noreferrer" class="">in GitHub</a>.</p>
<p>The basic usage of AuroraBoot involves passing it several parameters that define the installation environment, such as the version of Kairos you want to install, the cloud config you want to use, and other customizations you may need. You can pass these parameters either as command-line arguments, or as a full YAML configuration file.</p>
<p>AuroraBoot will download the artifacts required for bootstrapping the nodes, and prepare the environment required for a zero-touch deployment.</p>
<p>For example, to netboot a machine with the latest version of Kairos and  using a cloud config, you would run the following command:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti --net host quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;artifact_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;release_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;flavor=@flavor&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set repository=&quot;kairos-io/kairos&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --cloud-config https://...</span><br></span></code></pre></div></div>
<p>This command will download the necessary artifacts and start the provisioning process. The machine will attempt to boot from network, and will be configured with the specified version of Kairos.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="network-based-bootstrapping">Network-based bootstrapping<a href="#network-based-bootstrapping" class="hash-link" aria-label="Direct link to Network-based bootstrapping" title="Direct link to Network-based bootstrapping" translate="no">â€‹</a></h3>
<p>By default AuroraBoot will automatically attempt to bootstrap other machines, which are configured to boot from network, within the same network. No further configuration or settings necessary.</p>
<p>There are only 3 steps involved in the process:</p>
<ol>
<li class="">Select the release of Kairos that you want to deploy and optionally a cloud config (see also our <a class="" href="/kairos-docs/docs/examples">examples</a>)</li>
<li class="">Run AuroraBoot in your workstation with the appropriate CLI args</li>
<li class="">Boot up other nodes, already configured to boot from network</li>
</ol>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-selecting-a-release">1. Selecting a release<a href="#1-selecting-a-release" class="hash-link" aria-label="Direct link to 1. Selecting a release" title="Direct link to 1. Selecting a release" translate="no">â€‹</a></h4>
<p>AuroraBoot can bootstrap container images or released assets from our GitHub release process.</p>
<p>To use GitHub releases set a release version with <code>--set release_version</code> (the GitHub release), an artifact version with <code>--set artifact_version</code> (the artifact version) a flavor with <code>--set flavor</code> and a repository with <code>--set repository</code>.
Kairos has releases with (standard) and without (core) k3s both can be downloaded in the <a href="https://github.com/kairos-io/kairos/releases" target="_blank" rel="noopener noreferrer" class="">release page at kairos</a>.</p>
<p>To use a container image, you can use <a class="" href="/kairos-docs/docs/reference/image_matrix">the Kairos released images</a> or <a class="" href="/kairos-docs/docs/advanced/customizing">customized</a> by specifying <code>--set container_image</code> instead with the container image of choice.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-run-auroraboot">2. Run AuroraBoot<a href="#2-run-auroraboot" class="hash-link" aria-label="Direct link to 2. Run AuroraBoot" title="Direct link to 2. Run AuroraBoot" translate="no">â€‹</a></h4>
<p>Now we can run AuroraBoot with the version we selected, either from GitHub releases or directly from a container image.</p>
<p>In the example below we selected <code>latest-&lt;!-- Hugo shortcode: k3sVersion  --&gt;</code>,  flavor, so we would run either one of the following:</p>
<!-- -->
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Container image</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Container Image, with dockerd</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Github releases</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>By indicating a <code>container_image</code>, AuroraBoot will pull the image locally and start to serve it for network booting.</p><p>You can use <a class="" href="/kairos-docs/docs/reference/image_matrix">the Kairos released images</a> or <a class="" href="/kairos-docs/docs/advanced/customizing">your own</a>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti --net host quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;container_image=quay.io/kairos/kairos-standard:latest&quot;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>By indicating a <code>container_image</code> prefixed with <code>docker://</code>, AuroraBoot will pull the image from the local daemon and start to serve it for network booting.</p><p>This implies that the host has a docker daemon, and we have to give access to its socket with <code>-v /var/run/docker.sock:/var/run/docker.sock</code>.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull quay.io/kairos/kairos-standard:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># This will use the container image from the host&#x27;s docker daemon</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti -v /var/run/docker.sock:/var/run/docker.sock --net host quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;container_image=docker://quay.io/kairos/kairos-standard:latest&quot;</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>By indicating a <code>artifact_version</code>, a <code>release_version</code>, a <code>flavor</code> and a <code>repository</code>, AuroraBoot will use GitHub released assets.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti --net host quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;artifact_version=latest-latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;release_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;flavor=@flavor&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;flavor_release=@flavorRelease&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;repository=kairos-io/provider-kairos&quot;</span><br></span></code></pre></div></div></div></div></div>
<p>To specify a cloud config, you can set it with <code>--cloud-config</code>. See the sections below for further examples.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-start-nodes">3. Start nodes<a href="#3-start-nodes" class="hash-link" aria-label="Direct link to 3. Start nodes" title="Direct link to 3. Start nodes" translate="no">â€‹</a></h4>
<p>Generic hardware based netbooting is out of scope for this document.</p>
<p>Nodes need to be configured to boot over network, and after AuroraBoot is started should be ready to accept a connection, a typical output of a successfull run is:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2023/02/08 14:27:30 DHCP: Offering to boot 08:00:27:54:1a:d1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2023/02/08 14:27:30 TFTP: Sent &quot;08:00:27:54:1a:d1/4&quot; to 192.168.68.113:6489</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2023/02/08 14:27:36 DHCP: Offering to boot 08:00:27:54:1a:d1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2023/02/08 14:27:36 HTTP: Sending ipxe boot script to 192.168.68.113:45435</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2023/02/08 14:27:36 HTTP: Sent file &quot;kernel&quot; to 192.168.68.113:45435</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2023/02/08 14:27:36 HTTP: Sent file &quot;initrd-0&quot; to 192.168.68.113:45435</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2023/02/08 14:27:49 HTTP: Sent file &quot;other-0&quot; to 192.168.68.113:43044</span><br></span></code></pre></div></div>
<p>If trying on a VM, for instance on VirtualBox or QEMU, a typical setup might be:</p>
<ul>
<li class="">Set Netboot as first boot in the boot process order</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/2420543/217587463-cd293842-575e-4484-aee5-de46c4f053fb.png" alt="Screenshot from 2023-02-08 10-37-59" class="img_ev3q"></p>
<ul>
<li class="">Use bridge networking with the host (if running AuroraBoot and the VM in the same host)</li>
</ul>
<p><img decoding="async" loading="lazy" src="https://user-images.githubusercontent.com/2420543/217587465-35486742-26a1-4971-bee0-3049d9ec329a.png" alt="Screenshot from 2023-02-08 10-38-05" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="usb-based-bootstrapping">USB-based bootstrapping<a href="#usb-based-bootstrapping" class="hash-link" aria-label="Direct link to USB-based bootstrapping" title="Direct link to USB-based bootstrapping" translate="no">â€‹</a></h3>
<p>AuroraBoot by default prepares an ISO with the custom cloud init prepared for being flashed to an USB stick either with <code>dd</code> or with <a href="https://www.balena.io/etcher" target="_blank" rel="noopener noreferrer" class="">BalenaEtcher</a>.</p>
<p>To disable netboot and provide only offline artifacts, run <code>auroraboot</code> with <code>--set disable_netboot=true</code>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-node-configuration">1. Node configuration<a href="#1-node-configuration" class="hash-link" aria-label="Direct link to 1. Node configuration" title="Direct link to 1. Node configuration" translate="no">â€‹</a></h4>
<p>Create a cloud config file, see <a class="" href="/kairos-docs/docs/examples">our documentation</a> for ready-to use examples, but a minimal configuration that automatically installs, and allows us to login afterward can be the following:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#cloud-config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">install</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">auto</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">device</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;auto&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">reboot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Define the user accounts on the node.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">users</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kairos                       </span><span class="token comment" style="color:#999988;font-style:italic"># The username for the user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">passwd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kairos                      </span><span class="token comment" style="color:#999988;font-style:italic"># The password for the user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ssh_authorized_keys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic"># A list of SSH keys to add to the user&#x27;s authorized keys.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># - github:mudler                       # A key from the user&#x27;s GitHub account.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># - &quot;ssh-rsa AAA...&quot;                    # A raw SSH key.</span><br></span></code></pre></div></div>
<p>Save the file locally or remotely, you can pass it by in the arguments with <code>--cloud-config</code> to AuroraBoot. Note that can also be a remote http(s) path.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-create-an-offline-iso">2. Create an offline ISO<a href="#2-create-an-offline-iso" class="hash-link" aria-label="Direct link to 2. Create an offline ISO" title="Direct link to 2. Create an offline ISO" translate="no">â€‹</a></h4>
<p>Run AuroraBoot with a cloud-config to create an ISO with the embedded configuration:</p>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Container image</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Github releases</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>Check we have the cloud config file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># config.yaml</span><br></span></code></pre></div></div><p>Build the ISO:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/config.yaml:/config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    -v &quot;$PWD&quot;/build:/tmp/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set container_image=quay.io/kairos/kairos-core:latest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --cloud-config /config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;state_dir=/tmp/auroraboot&quot;</span><br></span></code></pre></div></div><p>Results should be available under <code>build/</code> in the current directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ls -liah build/iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># total 778M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34648528 drwx------ 2 root root 4.0K Feb  8 16:39 .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34648526 drwxr-xr-x 5 root root 4.0K Feb  8 16:38 ..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34648529 -rw-r--r-- 1 root root  253 Feb  8 16:38 config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34649370 -rw-r--r-- 1 root root 389M Feb  8 16:38 kairos.iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34649372 -rw-r--r-- 1 root root 389M Feb  8 16:39 kairos.iso.custom.iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34649371 -rw-r--r-- 1 root root   76 Feb  8 16:39 kairos.iso.sha256</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Check we have the cloud config file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ls</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># config.yaml</span><br></span></code></pre></div></div><p>Build the ISO:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/build:/tmp/auroraboot -v /var/run/docker.sock:/var/run/docker.sock --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;artifact_version=latest-latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;release_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;flavor=@flavor&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;flavor_release=@flavorRelease&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;repository=kairos-io/provider-kairos&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --cloud-config /config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    --set &quot;state_dir=/tmp/auroraboot&quot;</span><br></span></code></pre></div></div><p>Results should be available under <code>build/</code> in the current directory:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo ls -liah build/iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># total 778M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34648528 drwx------ 2 root root 4.0K Feb  8 16:39 .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34648526 drwxr-xr-x 5 root root 4.0K Feb  8 16:38 ..</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34648529 -rw-r--r-- 1 root root  253 Feb  8 16:38 config.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34649370 -rw-r--r-- 1 root root 389M Feb  8 16:38 kairos.iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34649372 -rw-r--r-- 1 root root 389M Feb  8 16:39 kairos.iso.custom.iso</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 34649371 -rw-r--r-- 1 root root   76 Feb  8 16:39 kairos.iso.sha256</span><br></span></code></pre></div></div></div></div></div>
<p>The result process will write an iso <code>kairos.iso.custom.iso</code> under <code>build/iso</code>. That is the iso with our embedded cloud-config.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-run-the-image">2. Run the image<a href="#2-run-the-image" class="hash-link" aria-label="Direct link to 2. Run the image" title="Direct link to 2. Run the image" translate="no">â€‹</a></h4>
<p>The iso now is ready to be written to USB stick with either <code>dd</code> or with <a href="https://www.balena.io/etcher" target="_blank" rel="noopener noreferrer" class="">BalenaEtcher</a>, or attached to a VM.</p>
<div class="theme-tabs-container tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Bare-Metal</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">QEMU</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>When deploying on a bare metal server, directly flash the image into a USB stick. There are multiple ways to do this:</p><p><strong>From the command line using the <code>dd</code> command</strong></p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">dd if=build/kairos.iso.custom.iso of=/path/to/dev bs=4MB</span><br></span></code></pre></div></div><p>or with <a href="https://www.balena.io/etcher" target="_blank" rel="noopener noreferrer" class="">BalenaEtcher</a>.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>Make sure you have KVM enabled, this will improve the performance of your VM significantly!</p></div></div><p>This would be the way to start it via the command line, but you can also use the GUI</p><p>virt-install --name my-first-kairos-vm <br>
<!-- -->--vcpus 1 <br>
<!-- -->--memory 1024 <br>
<!-- -->--cdrom build/kairos.iso.custom.iso <br>
<!-- -->--disk size=30 <br>
<!-- -->--os-variant opensuse-factory <br>
<!-- -->--virt-type kvm</p><p>Immediately after open a viewer so you can interact with the boot menu:</p><p>virt-viewer my-first-kairos-vm</p></div></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration" translate="no">â€‹</a></h2>
<p>The AuroraBoot configuration file reference is the following:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Corresponding artifact versions from the kairos release page (e.g. kubernetes version included)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">artifact_version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;v...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Version of the release in github</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">release_version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;latest&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Flavor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">flavor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@flavor&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Github repository</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">repository</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kairos-io/kairos&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Container image (takes over)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">container_image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Disable netboot</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">disable_netboot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Disable http server for serving offline generated ISOs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">disable_http_server</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Specify a directory that will be used by auroraboot to download artifacts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Reuse the same to cache artifacts.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">state_dir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;/tmp/auroraboot&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Default http binding port for offline ISO generation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">listen_addr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;:8080&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Cloud config to use when booting the machine.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">cloud_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><br></span></code></pre></div></div>
<table><thead><tr><th>Option</th><th>Description</th></tr></thead><tbody><tr><td><code>artifact_version</code></td><td>Corresponding artifact versions from the Kairos release page (e.g. Kubernetes version included).</td></tr><tr><td><code>release_version</code></td><td>Version of the release in GitHub.</td></tr><tr><td><code>flavor</code></td><td>The Kairos flavor to use. See <a class="" href="/kairos-docs/docs/reference/image_matrix">the Kairos support matrix</a> for a list.</td></tr><tr><td><code>repository</code></td><td>Github repository to use. This can either be <code>kairos-io/kairos</code> or <code>kairos-io/provider-kairos</code> for images with <code>k3s</code> prior to v2.4.0.</td></tr><tr><td><code>container_image</code></td><td>Container image. If prefixed with <code>docker://</code> it will try to pull from the local docker daemon. If a <code>container_image</code> is specified, <code>artifact_version</code>, <code>flavor</code> and <code>release_version</code> are ignored.</td></tr><tr><td><code>disable_netboot</code></td><td>Disable netboot.</td></tr><tr><td><code>disable_http_server</code></td><td>Disable http server for serving offline generated ISOs.</td></tr><tr><td><code>netboot_http_port</code></td><td>Specify a netboot HTTP port (defaults to <code>8090</code>).</td></tr><tr><td><code>state_dir</code></td><td>Specify a directory that will be used by auroraboot to download artifacts and reuse the same to cache artifacts.</td></tr><tr><td><code>listen_addr</code></td><td>Default http binding port for offline ISO generation.</td></tr><tr><td><code>cloud_config</code></td><td>Cloud config path to use for the machines. A URL can be specified, use <code>-</code> to pass-by the cloud-config from <em>STDIN</em></td></tr><tr><td><code>iso.data</code></td><td>Defines a path to be embedded into the resulting iso. When booting, the files will be accessible at <code>/run/initramfs/live</code></td></tr><tr><td><code>netboot.cmdline</code></td><td>Override the automatically generated cmdline with a custom one to use during netboot. <code>config_url</code> and <code>rootfs</code>  are automatically constructed. A reasonable value can be <code>netboot.cmdline=rd.neednet=1 ip=dhcp rd.cos.disable netboot install-mode console=tty0</code></td></tr><tr><td><code>disk.state_size</code></td><td>Set the minimum size (in MB) for the state partition in raw disk images. By default, the state partition is sized to 3 times the size of the current image plus some additional space for system files. Use this option to override the default size if you need to accommodate larger future images.</td></tr><tr><td><code>disk.efi</code></td><td>Generate an EFI-compatible raw disk image (suitable for AWS and QEMU). When set to <code>true</code>, the image will be created with EFI boot support.</td></tr><tr><td><code>disk.size</code></td><td>Set the final size (in MB) of the generated disk image. By default, the image size is calculated based on the actual data size. Use this option to create a larger disk image (e.g. <code>disk.size=16000</code> will create a 16GB image).</td></tr><tr><td><code>disk.bios</code></td><td>Generate a BIOS-compatible raw disk image. When set to <code>true</code>, the image will be created with legacy BIOS boot support instead of EFI.</td></tr><tr><td><code>disk.vhd</code></td><td>Generate an Azure-compatible VHD image. When set to <code>true</code>, the image will be created in VHD format suitable for Azure cloud platform.</td></tr><tr><td><code>disk.gce</code></td><td>Generate a Google Cloud Engine (GCE) compatible image. When set to <code>true</code>, the image will be created in a format suitable for Google Cloud Platform.</td></tr><tr><td>To use the configuration file with AuroraBoot, run AuroraBoot specifying the file or URL of the config as first argument:</td><td></td></tr></tbody></table>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti -v &quot;$PWD&quot;/config.yaml:/config.yaml --net host quay.io/kairos/auroraboot /config.yaml</span><br></span></code></pre></div></div>
<p>The CLI options can be used in place of specifying a file, and to set fields of it. Any field of the YAML file, excluding <code>cloud_config</code> can be configured with the <code>--set</code> for instance, to disable netboot we can run AuroraBoot with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti --net host quay.io/kairos/auroraboot ....  --set &quot;disable_netboot=true&quot;</span><br></span></code></pre></div></div>
<p>To specify a cloud config file instead, use <code>--cloud-config</code> (can be also url):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti -v &quot;$PWD&quot;/config.yaml:/config.yaml --net host quay.io/kairos/auroraboot .... --cloud-config /config.yaml</span><br></span></code></pre></div></div>
<p>Both the config file and the cloud-config file can be a URL.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="cloud-config">Cloud config<a href="#cloud-config" class="hash-link" aria-label="Direct link to Cloud config" title="Direct link to Cloud config" translate="no">â€‹</a></h3>
<p>A custom cloud configuration file can be passed either with the <code>--cloud-config</code> flag, or in the AuroraBoot configuration file under the <code>cloud_config</code> key.</p>
<p>It is possible to apply templating to a cloud config. Indeed any value passed to <code>--set</code> is accessible as a template in the cloud config file with the <code>[[</code> and <code>]]</code> delimiter, for instance consider the following cloud config file, which allows to set a password for the <code>kairos</code> user and a GitHub handle allowed to login to the machine:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">#cloud-config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">install</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">auto</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">device</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;auto&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">reboot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Define the user accounts on the node.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">users</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kairos&quot;</span><span class="token plain">                       </span><span class="token comment" style="color:#999988;font-style:italic"># The username for the user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">passwd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[[.kairos.password]]&quot;</span><span class="token plain">                      </span><span class="token comment" style="color:#999988;font-style:italic"># The password for the user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ssh_authorized_keys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic"># A list of SSH keys to add to the user&#x27;s authorized keys.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> github</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">.github.user</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p>We would then set the user to <code>mudler</code> and the password to <code>foobar</code> when running AuroraBoot like the following:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti -v &quot;$PWD&quot;/config.yaml:/config.yaml --net host \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                --cloud-config /config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                --set &quot;github.user=mudler&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                --set &quot;kairos.password=foobar&quot;</span><br></span></code></pre></div></div>
<p>Config files can be also hosted remotely, and given as URLs to AuroraBoot.</p>
<p>We can indeed use the template in the example folder with the command above:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --rm -ti --net host \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        --cloud-config https://raw.githubusercontent.com/kairos-io/kairos/master/examples/auroraboot/master-template.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        --set &quot;github.user=mudler&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        --set &quot;kairos.password=foobar&quot;</span><br></span></code></pre></div></div>
<p>To pass-by a cloud-config via pipes, set <code>--cloud-config -</code>, for example:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cat &lt;&lt;EOF </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> docker run </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rm </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">i </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">net host quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">cloud</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">set &quot;container_image=quay.io/kairos/kairos</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">standard</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">latest&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#cloud-config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">install</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">device</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;auto&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">auto</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">reboot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">hostname</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> metal</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bundle</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">test</span><span class="token punctuation" style="color:#393A34">-</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> trunc 4 .MachineID </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">users</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kairos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Change to your pass here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">passwd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kairos</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">ssh_authorized_keys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Replace with your github user and un-comment the line below:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> github</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">mudler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">k3s</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">enabled</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Specify the bundle to use</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">bundles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">targets</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//quay.io/kairos/community</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bundles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">cert</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">manager_latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//quay.io/kairos/community</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">bundles</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">kairos_latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kairos</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">entangle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">enable</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EOF</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples" translate="no">â€‹</a></h2>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>The example below are implying a <code>config.yaml</code> cloud config file to be present in the current directory.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="offline-iso-build-from-local-container-image">Offline ISO build from local container image<a href="#offline-iso-build-from-local-container-image" class="hash-link" aria-label="Direct link to Offline ISO build from local container image" title="Direct link to Offline ISO build from local container image" translate="no">â€‹</a></h3>
<p>First make sure we have the image locally with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull &lt;IMAGE&gt;</span><br></span></code></pre></div></div>
<p>Build the custom ISO with the cloud config:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/config.yaml:/config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             -v &quot;$PWD&quot;/build:/tmp/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             -v /var/run/docker.sock:/var/run/docker.sock \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set container_image=docker://&lt;IMAGE&gt; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --cloud-config /config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;state_dir=/tmp/auroraboot&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="offline-iso-build-from-container-images">Offline ISO build from container images<a href="#offline-iso-build-from-container-images" class="hash-link" aria-label="Direct link to Offline ISO build from container images" title="Direct link to Offline ISO build from container images" translate="no">â€‹</a></h3>
<p>Build the custom ISO with the cloud config:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/config.yaml:/config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             -v &quot;$PWD&quot;/build:/tmp/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set container_image=quay.io/kairos/kairos-core:latest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --cloud-config /config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;state_dir=/tmp/auroraboot&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="override-grub-config-file">Override GRUB config file<a href="#override-grub-config-file" class="hash-link" aria-label="Direct link to Override GRUB config file" title="Direct link to Override GRUB config file" translate="no">â€‹</a></h3>
<p>It is possible to override the default GRUB config file of the ISO by creating a directory that
contains the files that we want to add or replace in it.</p>
<p>For example, to override the GRUB config file:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p data/boot/grub2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># You can replace this step with your own grub config. This GRUB configuration is the boot menu of the ISO</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://raw.githubusercontent.com/kairos-io/packages/main/packages/livecd/grub2/config/grub_live_bios.cfg -O data/boot/grub2/grub.cfg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/config.yaml:/config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             -v &quot;$PWD&quot;/data:/tmp/data \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             -v &quot;$PWD&quot;/build:/tmp/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set container_image=quay.io/kairos/kairos-core:latest \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --cloud-config /config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;state_dir=/tmp/auroraboot&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             --set &quot;iso.data=/tmp/data&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="prepare-iso-for-airgap-installations">Prepare ISO for Airgap installations<a href="#prepare-iso-for-airgap-installations" class="hash-link" aria-label="Direct link to Prepare ISO for Airgap installations" title="Direct link to Prepare ISO for Airgap installations" translate="no">â€‹</a></h3>
<p>See the <a class="" href="/kairos-docs/docs/examples/airgap">Airgap example</a> in the <a class="" href="/kairos-docs/docs/examples">examples section</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="netboot-with-core-images-from-github-releases">Netboot with core images from Github releases<a href="#netboot-with-core-images-from-github-releases" class="hash-link" aria-label="Direct link to Netboot with core images from Github releases" title="Direct link to Netboot with core images from Github releases" translate="no">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/config.yaml:/config.yaml --rm -ti --net host quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set &quot;artifact_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set &quot;release_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set &quot;flavor=@flavor&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set repository=&quot;kairos-io/kairos&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --cloud-config /config.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="netboot-with-k3s-images-from-github-releases">Netboot with k3s images from Github releases<a href="#netboot-with-k3s-images-from-github-releases" class="hash-link" aria-label="Direct link to Netboot with k3s images from Github releases" title="Direct link to Netboot with k3s images from Github releases" translate="no">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/config.yaml:/config.yaml --rm -ti --net host quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set &quot;artifact_version=latest-latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set &quot;release_version=latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set &quot;flavor=@flavor&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set &quot;flavor_release=@flavorRelease&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set &quot;repository=kairos-io/provider-kairos&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --cloud-config /config.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="netboot-from-container-images">Netboot from container images<a href="#netboot-from-container-images" class="hash-link" aria-label="Direct link to Netboot from container images" title="Direct link to Netboot from container images" translate="no">â€‹</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/config.yaml:/config.yaml --rm -ti --net host quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --set container_image=quay.io/kairos/kairos-core:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        --cloud-config /config.yaml</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="generate-raw-disk-images">Generate RAW disk images<a href="#generate-raw-disk-images" class="hash-link" aria-label="Direct link to Generate RAW disk images" title="Direct link to Generate RAW disk images" translate="no">â€‹</a></h3>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>This method differs from the ones documented in the <a class="" href="/kairos-docs/docs/next/Reference/build_raw_images_with_qemu">Build raw images with QEMU</a> section: this method is suitable if you need to create appliances that have to run a full-installation. AuroraBoot will create instead images pre-installed which will skip the usual Kairos installation process in runtime</p></div></div>
<p>Consider the following example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --privileged -v /var/run/docker.sock:/var/run/docker.sock \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v $PWD:/aurora --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disk.efi=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;container_image=quay.io/kairos/kairos-standard:latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;state_dir=/aurora&quot;</span><br></span></code></pre></div></div>
<p>The raw disk image will be available in the current directory with the <code>.raw</code> image extension. By default, the state partition will be sized to 3 times the size of the current image plus some additional space for system files.</p>
<p>If you need to ensure the state partition can accommodate larger future images, you can override the default size with <code>disk.state_size</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --privileged -v /var/run/docker.sock:/var/run/docker.sock \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v $PWD:/aurora --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disk.efi=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disk.state_size=6000&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;container_image=quay.io/kairos/kairos-standard:latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;state_dir=/aurora&quot;</span><br></span></code></pre></div></div>
<p>To generate a BIOS raw image just change <code>disk.efi=true</code> for <code>disk.bios=true</code></p>
<p>To generate GCE and VHD images set <code>disk.gce=true</code> or <code>disk.vhd=true</code> respectively in the AuroraBoot command. For example:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build a GCE-compatible image</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run --privileged -v /var/run/docker.sock:/var/run/docker.sock \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v $PWD:/aurora --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;container_image=quay.io/kairos/kairos-standard:latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cloud-config /aurora/config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disk.gce=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;state_dir=/aurora&quot;</span><br></span></code></pre></div></div>
<p>or for VHD images:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build a VHD image compatible with Azure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker run --privileged -v /var/run/docker.sock:/var/run/docker.sock \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  -v $PWD:/aurora --rm -ti quay.io/kairos/auroraboot \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --debug \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disable_http_server=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;container_image=quay.io/kairos/kairos-standard:latest&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disable_netboot=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --cloud-config /aurora/config.yaml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;disk.vhd=true&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --set &quot;state_dir=/aurora&quot;</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Note</div><div class="admonitionContent_BuS1"><p>Note that for creating raw images, the <code>--privileged</code> flag is used as the process creates loop devices, which
requires elevated privileges. This is not needed for the other methods of using AuroraBoot.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="use-the-config-file">Use the config file<a href="#use-the-config-file" class="hash-link" aria-label="Direct link to Use the config file" title="Direct link to Use the config file" translate="no">â€‹</a></h3>
<p>Write down an aurora config file as <code>aurora.yaml</code>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">container_image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;quay.io/kairos/kairos-core:latest&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">cloud_config</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    #cloud-config</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">install</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">auto</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">device</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;auto&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">reboot</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Define the user accounts on the node.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">users</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kairos                       </span><span class="token comment" style="color:#999988;font-style:italic"># The username for the user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">passwd</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kairos                      </span><span class="token comment" style="color:#999988;font-style:italic"># The password for the user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">groups</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ssh_authorized_keys</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">                  </span><span class="token comment" style="color:#999988;font-style:italic"># A list of SSH keys to add to the user&#x27;s authorized keys.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># - github:mudler                       # A key from the user&#x27;s GitHub account.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># - &quot;ssh-rsa AAA...&quot;                    # A raw SSH key.</span><br></span></code></pre></div></div>
<p>And then run:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run -v &quot;$PWD&quot;/aurora.yaml:/aurora.yaml --rm -ti --net host quay.io/kairos/auroraboot /aurora.yaml</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="booting-with-uki-and-secure-boot-via-http-boot">Booting with UKI and Secure Boot via HTTP Boot<a href="#booting-with-uki-and-secure-boot-via-http-boot" class="hash-link" aria-label="Direct link to Booting with UKI and Secure Boot via HTTP Boot" title="Direct link to Booting with UKI and Secure Boot via HTTP Boot" translate="no">â€‹</a></h2>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>Version support</div><div class="admonitionContent_BuS1"><p>This feature is available on AuroraBoot v0.8.1 and later, and requires Kairos version 3.5.x or higher.
Currently, only HTTP boot has been tested and validated for this setup. PXE booting with UKI and Secure Boot is not yet supported and probably wont be.</p></div></div>
<p>AuroraBoot supports netbooting <strong>Trusted Boot Images (UKI)</strong>. This process relies on using HTTP Boot to enroll the necessary keys and boot the UKI ISO directly as a virtual CDROM which is a UEFI 2.5 feature.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="how-it-works">How it Works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How it Works" title="Direct link to How it Works" translate="no">â€‹</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Info</div><div class="admonitionContent_BuS1"><p>To use this feature, the machine needs to start in &quot;setup&quot; mode, which means secure boot is disabled and there are no keys enrolled in the firmware. Otherwise the machine won&#x27;t boot the UKI ISO, as it will not be able to enroll the keys.</p></div></div>
<ol>
<li class="">The machine boots HTTP Boot and loads the ISO.</li>
<li class="">The ISO is loaded on memory and booted and systemd-boot enrolls the keys from the ISO into the firmware, allowing the UKI to boot and enabling Secure Boot.</li>
<li class="">The machine reboots and HTTP boots the UKI ISO again, this time with Secure Boot enabled.</li>
<li class="">The system boots fully from the UKI ISO into memory.</li>
<li class="">The Kernel maps the ISO from the memory and presents it to the OS like any other media, allowing the OS to use it as an install source like if we booted from a USB stick or a CD-ROM.</li>
</ol>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="preparing-the-boot-environment">Preparing the Boot Environment<a href="#preparing-the-boot-environment" class="hash-link" aria-label="Direct link to Preparing the Boot Environment" title="Direct link to Preparing the Boot Environment" translate="no">â€‹</a></h2>
<p>You must provide:</p>
<ul>
<li class="">A <strong>Trusted Boot Kairos ISO</strong></li>
</ul>
<p>For example if your ISO is at <code>/opt/images/kairos-uki.iso</code>, start AuroraBoot with:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker run --privileged -v /opt/images/:/aurora --rm -ti quay.io/kairos/auroraboot uki-pxe /aurora/kairos-uki.iso</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources" translate="no">â€‹</a></h2>
<ul>
<li class=""><a href="https://github.com/kairos-io/kairos-agent/pull/791" target="_blank" rel="noopener noreferrer" class="">kairos-agent PR #791</a></li>
<li class=""><a href="https://github.com/kairos-io/AuroraBoot/pull/276" target="_blank" rel="noopener noreferrer" class="">AuroraBoot PR #276</a></li>
<li class=""><a href="https://github.com/kairos-io/efi-key-enroller" target="_blank" rel="noopener noreferrer" class="">efi-key-enroller repo</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/kairos-io/kairos-docs/tree/main/docs/Reference/auroraboot.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-12-07T22:30:47.000Z" itemprop="dateModified">Dec 7, 2025</time></b> by <b>Jasper De Keukelaere (imec)</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/kairos-docs/docs/next/Reference/artifacts"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Artifact Naming Convention</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/kairos-docs/docs/next/Reference/configuration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Configuration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#scope" class="table-of-contents__link toc-highlight">Scope</a></li><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#macos" class="table-of-contents__link toc-highlight">MacOS</a></li><li><a href="#windows" class="table-of-contents__link toc-highlight">Windows</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a><ul><li><a href="#network-based-bootstrapping" class="table-of-contents__link toc-highlight">Network-based bootstrapping</a></li><li><a href="#usb-based-bootstrapping" class="table-of-contents__link toc-highlight">USB-based bootstrapping</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#cloud-config" class="table-of-contents__link toc-highlight">Cloud config</a></li></ul></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a><ul><li><a href="#offline-iso-build-from-local-container-image" class="table-of-contents__link toc-highlight">Offline ISO build from local container image</a></li><li><a href="#offline-iso-build-from-container-images" class="table-of-contents__link toc-highlight">Offline ISO build from container images</a></li><li><a href="#override-grub-config-file" class="table-of-contents__link toc-highlight">Override GRUB config file</a></li><li><a href="#prepare-iso-for-airgap-installations" class="table-of-contents__link toc-highlight">Prepare ISO for Airgap installations</a></li><li><a href="#netboot-with-core-images-from-github-releases" class="table-of-contents__link toc-highlight">Netboot with core images from Github releases</a></li><li><a href="#netboot-with-k3s-images-from-github-releases" class="table-of-contents__link toc-highlight">Netboot with k3s images from Github releases</a></li><li><a href="#netboot-from-container-images" class="table-of-contents__link toc-highlight">Netboot from container images</a></li><li><a href="#generate-raw-disk-images" class="table-of-contents__link toc-highlight">Generate RAW disk images</a></li><li><a href="#use-the-config-file" class="table-of-contents__link toc-highlight">Use the config file</a></li></ul></li><li><a href="#booting-with-uki-and-secure-boot-via-http-boot" class="table-of-contents__link toc-highlight">Booting with UKI and Secure Boot via HTTP Boot</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How it Works</a></li><li><a href="#preparing-the-boot-environment" class="table-of-contents__link toc-highlight">Preparing the Boot Environment</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/kairos-docs/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/kairos-docs/docs/installation">Installation</a></li><li class="footer__item"><a class="footer__link-item" href="/kairos-docs/docs/architecture">Architecture</a></li><li class="footer__item"><a class="footer__link-item" href="/kairos-docs/docs/examples">Examples</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://slack.cncf.io/#kairos" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/kairos-io/kairos/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/kairos-oss/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/Kairos_OSS" target="_blank" rel="noopener noreferrer" class="footer__link-item">X (Twitter)<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/kairos-docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/kairos-io/kairos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.spectrocloud.com/solutions/kairos-support" target="_blank" rel="noopener noreferrer" class="footer__link-item">Commercial Support<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Kairos authors</div></div></div></footer></div>
</body>
</html>