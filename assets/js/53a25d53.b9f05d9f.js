"use strict";(globalThis.webpackChunkkairos_docs=globalThis.webpackChunkkairos_docs||[]).push([[2053],{28453:(e,i,t)=>{t.d(i,{R:()=>o,x:()=>a});var s=t(96540);const n={},r=s.createContext(n);function o(e){const i=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(r.Provider,{value:i},e.children)}},54907:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Architecture/meta","title":"Meta-Distribution","description":"We like to define Kairos as a meta-Linux Distribution, as its goal is to convert other distros to an immutable layout with Kubernetes Native components.","source":"@site/docs/Architecture/meta.md","sourceDirName":"Architecture","slug":"/Architecture/meta","permalink":"/docs/next/Architecture/meta","draft":false,"unlisted":false,"editUrl":"https://github.com/kairos-io/kairos-docs/tree/main/docs/Architecture/meta.md","tags":[],"version":"current","lastUpdatedBy":"Jasper De Keukelaere (imec)","lastUpdatedAt":1765043763000,"sidebarPosition":4,"frontMatter":{"title":"Meta-Distribution","sidebar_label":"Meta-Distribution","sidebar_position":4,"date":"2022-11-13T00:00:00.000Z"},"sidebar":"tutorialSidebar","previous":{"title":"SecureBoot support","permalink":"/docs/next/Architecture/secureboot"},"next":{"title":"P2P Network","permalink":"/docs/next/Architecture/network"}}');var n=t(74848),r=t(28453);const o={title:"Meta-Distribution",sidebar_label:"Meta-Distribution",sidebar_position:4,date:new Date("2022-11-13T00:00:00.000Z")},a=void 0,l={},c=[{value:"Kairos",id:"kairos",level:2},{value:"Requirements",id:"requirements",level:3},{value:"Internal components",id:"internal-components",level:3}];function d(e){const i={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.p,{children:"We like to define Kairos as a meta-Linux Distribution, as its goal is to convert other distros to an immutable layout with Kubernetes Native components."}),"\n",(0,n.jsx)(i.h2,{id:"kairos",children:"Kairos"}),"\n",(0,n.jsx)(i.p,{children:"Kairos is a software stack is composed of the following:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["A core OS image release for each flavor in ISO, qcow2, and other similar formats (see ",(0,n.jsx)(i.a,{href:"../../reference/image_matrix",children:"the list of supported distributions"}),") provided for user convenience"]}),"\n",(0,n.jsx)(i.li,{children:"A release with K3s embedded (optional)."}),"\n",(0,n.jsx)(i.li,{children:"An agent installed into the nodes to manage the node lifecycle."}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Every component is extensible and modular such as it can be customized and replaced in the stack and built off either locally or with Kubernetes."}),"\n",(0,n.jsx)(i.h3,{id:"requirements",children:"Requirements"}),"\n",(0,n.jsx)(i.p,{children:"In order to convert a Linux Distribution to Kairos, the distribution must meet the following requirements:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Trusted Boot Images","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Use a recent enough version of ",(0,n.jsx)(i.code,{children:"systemd"})," (256+) as init system"]}),"\n",(0,n.jsxs)(i.li,{children:["Use ",(0,n.jsx)(i.code,{children:"systemd-boot"})," as bootloader"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["Secure Boot Only Images","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["Either use ",(0,n.jsx)(i.code,{children:"systemd"})," or ",(0,n.jsx)(i.code,{children:"openrc"})," init system"]}),"\n",(0,n.jsxs)(i.li,{children:["Use ",(0,n.jsx)(i.code,{children:"grub"})," as bootloader"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["All","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["If the system is meant to be used with EFI, the kernel needs to have enabled the ",(0,n.jsx)(i.code,{children:"CONFIG_EFI_STUB"})," option ( see: ",(0,n.jsx)(i.a,{href:"https://docs.kernel.org/admin-guide/efi-stub.html",children:"https://docs.kernel.org/admin-guide/efi-stub.html"}),")"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["To build Kairos from scratch, see ",(0,n.jsx)(i.a,{href:"../../reference/build-from-scratch",children:"the documentation"})," section."]}),"\n",(0,n.jsx)(i.h3,{id:"internal-components",children:"Internal components"}),"\n",(0,n.jsxs)(i.p,{children:["The Kairos artifacts are composed by a base OS (an upstream Linux distribution, like ",(0,n.jsx)(i.em,{children:"Ubuntu"}),", ",(0,n.jsx)(i.em,{children:"Alpine"}),", ...) and a set of components that are installed on top of it. The components are:"]}),"\n",(0,n.jsx)(i.p,{children:"Internal:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/kairos",children:"kairos"})," is the main repository, building the ",(0,n.jsx)(i.code,{children:"kairos-agent"})," and containing the image definitions which runs on our CI pipelines."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/immucore",children:"immucore"})," is the immutability management interface."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/kairos-agent",children:"kairos-agent"})," manages the installation, reset, and upgrade of the Kairos nodes."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/packages",children:"system packages"})," contains additional packages, cross-distro, partly used in framework images"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/kcrypt",children:"kcrypt"})," is the component responsible for encryption and decryption of data at rest"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/kcrypt-challenger",children:"kcrypt-challenger"})," is the ",(0,n.jsx)(i.code,{children:"kairos"})," plugin that works with the TPM chip to unlock LUKS partitions"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"Optional/External:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://k3s.io",children:"K3s"})," as a Kubernetes distribution"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://mudler.github.io/edgevpn",children:"edgevpn"})," (optional) as fabric for the distributed network, node coordination and bootstrap. Provides also embedded DNS capabilities for the cluster. Internally uses ",(0,n.jsx)(i.a,{href:"https://github.com/libp2p/go-libp2p",children:"libp2p"})," for the P2P mesh capabilities."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/hakavlad/nohang",children:"nohang"})," A sophisticated low memory handler for Linux."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/entangle",children:"entangle"})," a CRD to interconnect Kubernetes clusters"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/entangle-proxy",children:"entangle-proxy"})," a CRD to control interconnected clusters"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/osbuilder",children:"osbuilder"})," is used to build bootable artifacts from container images"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://github.com/kairos-io/AuroraBoot",children:"AuroraBoot"})," is the Kairos Node bootstrapper"]}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}}}]);