"use strict";(globalThis.webpackChunkkairos_docs=globalThis.webpackChunkkairos_docs||[]).push([[8128],{3270:e=>{e.exports=JSON.parse('{"permalink":"/blog/xz-backdoor","editUrl":"https://github.com/kairos-io/kairos/tree/main/packages/create-kairos/templates/shared/blog/2024-04-02-xz-backdoor.md","source":"@site/blog/2024-04-02-xz-backdoor.md","title":"xz Utils Backdoor","description":"It\'s all over the tech news. Someone managed to put a backdoor on xz Utils, a very common package on Linux systems. In this post I want to share with you about what happened, how it impacted Kairos images, and what you should do in case you were affected.","date":"2024-04-02T00:00:00.000Z","tags":[{"inline":false,"label":"Kairos","permalink":"/blog/tags/kairos","description":"Posts about Kairos, an open-source, cloud-native, and immutable Linux distribution"}],"readingTime":3.19,"hasTruncateMarker":true,"authors":[{"name":"Mauro Morales","socials":{"github":"https://github.com/mauromorales","x":"https://x.com/mauromrls"},"url":"https://github.com/mauromorales","imageURL":"https://github.com/mauromorales.png","key":"mauro-morales","page":null}],"frontMatter":{"authors":["mauro-morales"],"slug":"xz-backdoor","tags":["kairos"],"title":"xz Utils Backdoor"},"unlisted":false,"prevItem":{"title":"Unlocking the Mysteries of Trusted Boot: A Deep Dive into Secure System Boot Processes","permalink":"/blog/trusted-boot"},"nextItem":{"title":"SPOS Panel at KubeCon Paris 2024","permalink":"/blog/spos-panel-at-kubecon-paris-2024"}}')},28453:(e,t,o)=>{o.d(t,{R:()=>n,x:()=>r});var s=o(96540);const a={},i=s.createContext(a);function n(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:n(e.components),s.createElement(i.Provider,{value:t},e.children)}},73671:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>n,metadata:()=>s,toc:()=>c});var s=o(3270),a=o(74848),i=o(28453);const n={authors:["mauro-morales"],slug:"xz-backdoor",tags:["kairos"],title:"xz Utils Backdoor"},r=void 0,d={authorsImageUrls:[void 0]},c=[{value:"TL;DR",id:"tldr",level:2},{value:"xz Utils Backdoor",id:"xz-utils-backdoor",level:2},{value:"How it affected us?",id:"how-it-affected-us",level:2},{value:"What to do if you were affected?",id:"what-to-do-if-you-were-affected",level:2}];function l(e){const t={a:"a",blockquote:"blockquote",h2:"h2",p:"p",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.p,{children:"It's all over the tech news. Someone managed to put a backdoor on xz Utils, a very common package on Linux systems. In this post I want to share with you about what happened, how it impacted Kairos images, and what you should do in case you were affected."}),"\n",(0,a.jsx)(t.h2,{id:"tldr",children:"TL;DR"}),"\n",(0,a.jsx)(t.p,{children:"A backdoor that can be used to exploit systemd based Linux via ssh was introduced in xz Utils. Only Kairos Tumbleweed v3.0.1 and v3.0.2 were affected. We deleted all related OCI images from our repos and artifacts from our releases. If you installed it and the system was exposed to the internet, you should do a complete re-install. If you hosted security keys in given system, you should rotate them."}),"\n",(0,a.jsx)(t.h2,{id:"xz-utils-backdoor",children:"xz Utils Backdoor"}),"\n",(0,a.jsx)(t.p,{children:"Versions 5.6.0 and 5.6.1 of xz Utils, which is used in many Linux distributions, are infected with a backdoor mechanism. Even if you don't install xz Utils directly, you might still be exposed if you're on a systemd based distribution, which is the case of most commonly used distros nowadays. This is because the init system, has a dependency on liblzma one of the affected libraries. The attack can be triggered via ssh access, which could have been catastrophic considering how many systems today connect to the internet."}),"\n",(0,a.jsxs)(t.p,{children:["If you want to read more about how the backdoor read ",(0,a.jsx)(t.a,{href:"https://arstechnica.com/security/2024/04/what-we-know-about-the-xz-utils-backdoor-that-almost-infected-the-world/",children:"one"})," of ",(0,a.jsx)(t.a,{href:"https://arstechnica.com/security/2024/03/backdoor-found-in-widely-used-linux-utility-breaks-encrypted-ssh-connections/",children:"these"})," posts, or read ",(0,a.jsx)(t.a,{href:"https://www.openwall.com/lists/oss-security/2024/03/29/4",children:"Andres' disclosure email to the OSS"}),". However, more interesting than the technical implementation of the backdoor, is all the social engineering that took place."]}),"\n",(0,a.jsx)(t.p,{children:"I would like to bring your attention to the fact that in 2024, many critical open-source projects are still maintained by individuals, who do this on their spare time and who are not paid for it. It's no wonder that these maintainers are burned out or suffering of other mental health issues, as it is the case of the official xz Utils maintainer. Under such conditions it's no wonder that he was tricked by a malicious actor. As a community, we must find a solution because this time the issue was caught before it widespread, but we might not be as lucky next time."}),"\n",(0,a.jsx)(t.h2,{id:"how-it-affected-us",children:"How it affected us?"}),"\n",(0,a.jsx)(t.p,{children:"On Monday, April 1st, after reading about the news, team member Dimitris Karakasilis decided to investigate which of our systems was affected. In his evaluation he noticed that the infected xz packages reached only Kairos Tumbleweed v3.0.1 and v3.0.2. The affected package never reached any of our other flavors since they are not rolling releases and therefore didn't get a package update."}),"\n",(0,a.jsxs)(t.p,{children:["After the analysis, on April 2nd, we deleted all related artifacts including OCI images from quay.io/kairos/opensuse, and ISOs from out ",(0,a.jsx)(t.a,{href:"https://github.com/kairos-io/kairos/releases",children:"GitHub Releases"}),". Despite the artifacts not being available any longer, we decided to add a note of caution on the affected releases for anyone who wonders why the Tumbleweed artifacts are missing, and to better inform users on how react."]}),"\n",(0,a.jsx)(t.h2,{id:"what-to-do-if-you-were-affected",children:"What to do if you were affected?"}),"\n",(0,a.jsxs)(t.p,{children:["Since only Tumblweed was affected, we decided to point you directly to ",(0,a.jsx)(t.a,{href:"https://news.opensuse.org/2024/03/29/xz-backdoor/",children:"openSUSE's recommendation"}),", in which they recommend to:"]}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsx)(t.p,{children:"For our openSUSE Tumbleweed users where SSH is exposed to the internet, we recommend installing fresh, as it\u2019s unknown if the backdoor has been exploited."}),"\n",(0,a.jsx)(t.p,{children:"Due to the sophisticated nature of the backdoor an on-system detection of a breach is likely not possible."}),"\n",(0,a.jsx)(t.p,{children:"Also rotation of any credentials that could have been fetched from the system is highly recommended."}),"\n"]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.a,{href:"https://www.suse.com/security/cve/CVE-2024-3094.html",children:"https://www.suse.com/security/cve/CVE-2024-3094.html"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);