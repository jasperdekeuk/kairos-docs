"use strict";(globalThis.webpackChunkkairos_docs=globalThis.webpackChunkkairos_docs||[]).push([[1328],{3317:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Installation/aws","title":"Installation on AWS","description":"Install Kairos on AWS","source":"@site/versioned_docs/version-3.5.7/Installation/aws.md","sourceDirName":"Installation","slug":"/Installation/aws","permalink":"/docs/3.5.7/Installation/aws","draft":false,"unlisted":false,"editUrl":"https://github.com/kairos-io/kairos-docs/tree/main/versioned_docs/version-3.5.7/Installation/aws.md","tags":[],"version":"3.5.7","lastUpdatedBy":"Jasper De Keukelaere (imec)","lastUpdatedAt":1765142882000,"sidebarPosition":2,"frontMatter":{"title":"Installation on AWS","sidebar_label":"Installation on AWS","sidebar_position":2,"date":"2025-01-27T00:00:00.000Z","description":"Install Kairos on AWS"},"sidebar":"tutorialSidebar","previous":{"title":"Check the Signatures","permalink":"/docs/3.5.7/Installation/check-the-signatures"},"next":{"title":"Interactive","permalink":"/docs/3.5.7/Installation/interactive"}}');var t=i(74848),a=i(28453);const o={title:"Installation on AWS",sidebar_label:"Installation on AWS",sidebar_position:2,date:new Date("2025-01-27T00:00:00.000Z"),description:"Install Kairos on AWS"},r=void 0,c={},l=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Find the AMI",id:"find-the-ami",level:2},{value:"Verify the AMI",id:"verify-the-ami",level:2},{value:"Launch the instance",id:"launch-the-instance",level:2},{value:"Access the instance",id:"access-the-instance",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["This page describes how to install Kairos on AWS after you have created an AMI. Since release v3.3.0, Kairos pipeline is pushing a public AMI image to AWS which you can use.\nIf you want to build a custom image, you can follow the instructions in the ",(0,t.jsx)(n.a,{href:"../../advanced/build",children:"Build Kairos appliances"})," page."]}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"An AWS account with permissions to create EC2 instances."}),"\n",(0,t.jsx)(n.li,{children:"An AMI image of Kairos. You can use the public AMI image provided by Kairos or build your own image."}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"find-the-ami",children:"Find the AMI"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Login to your AWS account."}),"\n",(0,t.jsx)(n.li,{children:"Go to the EC2 dashboard -> Images -> AMIs."}),"\n",(0,t.jsx)(n.li,{children:'If you are looking for the Kairos AMI, make sure you are searching among "Public images". Then search for "kairos"\nin the search bar.'}),"\n",(0,t.jsx)(n.li,{children:'If you are looking for an AMI you created, make sure you are searching among "Owned by me". Then search for your AMI.'}),"\n",(0,t.jsxs)(n.li,{children:["Select the AMI you want to use (e.g. ",(0,t.jsx)(n.code,{children:"kairos-ubuntu-24.04-standard-amd64-generic-v3.3.0-k3sv1.32.0-k3s1.raw"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["From the top menu, click on ",(0,t.jsx)(n.code,{children:"Launch instance from AMI"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"verify-the-ami",children:"Verify the AMI"}),"\n",(0,t.jsxs)(n.p,{children:["To ensure you're using a genuine Kairos AMI, check the AMI owner ID. The AMI should be owned by the Kairos team's AWS account. You can find this information in the AMI details.  Look for the Owner Account ID. It should be ",(0,t.jsx)(n.code,{children:"171987620676"})," (The Kairos account ID)."]}),"\n",(0,t.jsx)(n.p,{children:"You can also verify the AMI using the AWS CLI:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"aws ec2 describe-images --region <AMI_REGION> --image-ids <AMI_ID> --query 'Images[0].[OwnerId,Name,Description]'\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Replace ",(0,t.jsx)(n.code,{children:"<AMI_ID>"})," with the ID of the AMI you want to verify and the <AMI_REGION> with the region of that AMI. The output will show you the owner ID, name, and description of the AMI."]}),"\n",(0,t.jsx)(n.h2,{id:"launch-the-instance",children:"Launch the instance"}),"\n",(0,t.jsx)(n.p,{children:"In this page you get to select the instance type, configure the instance, and add storage. Make sure you give the instance enough resources to run Kairos and your desired workloads (e.g. make sure the disk is at least 3 times the size of your image to allow for active, passive and recovery images)."}),"\n",(0,t.jsxs)(n.p,{children:["You can also pass a Kairos config using the userdata field (Click on ",(0,t.jsx)(n.code,{children:"Advanced details"})," -> ",(0,t.jsx)(n.code,{children:"User data"})," and put your Kairos config in the box)."]}),"\n",(0,t.jsxs)(n.p,{children:["You should at least specify a user and a password (or SSH key) if you need to SSH to the instance (Check the ",(0,t.jsx)(n.a,{href:"/getting-started/",children:"Getting started"})," page for some examples)."]}),"\n",(0,t.jsxs)(n.p,{children:["When you click on ",(0,t.jsx)(n.code,{children:"Launch instance"}),' the instance will be created and Kairos will boot into "auto-reset mode" by default. This means, that Kairos will "install" itself on the first boot and then reboot.']}),"\n",(0,t.jsx)(n.p,{children:"You can specify a different image to be installed using a block like the following in the userdata:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:'reset:\n  source: "oci:quay.io/kairos/opensuse:leap-15.6-standard-amd64-generic-master-k3sv1.32.1-rc2-k3s1"\n'})}),"\n",(0,t.jsx)(n.p,{children:"This will reset to the specified image on the first boot instead of the image booted."}),"\n",(0,t.jsx)(n.h2,{id:"access-the-instance",children:"Access the instance"}),"\n",(0,t.jsx)(n.p,{children:'Once the instance is running, you can access it via SSH. Make sure reset has completed and the system has rebooted into "active" mode. The following command should report "active_boot":'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"kairos-agent state get boot\n"})}),"\n",(0,t.jsxs)(n.p,{children:["(It it reports ",(0,t.jsx)(n.code,{children:"recovery_boot"}),", the system is still in the installation process. Wait a few minutes and try again.)"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>r});var s=i(96540);const t={},a=s.createContext(t);function o(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);