"use strict";(globalThis.webpackChunkkairos_docs=globalThis.webpackChunkkairos_docs||[]).push([[9785],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var t=s(96540);const o={},i=t.createContext(o);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(i.Provider,{value:n},e.children)}},96365:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>c,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Examples/bundles","title":"Bundles","description":"This section describe examples on how to use a Kairos bundle to deploy MetalLB on top of K3s","source":"@site/versioned_docs/version-3.6.0/Examples/bundles.md","sourceDirName":"Examples","slug":"/Examples/bundles","permalink":"/docs/3.6.0/Examples/bundles","draft":false,"unlisted":false,"editUrl":"https://github.com/kairos-io/kairos-docs/tree/main/versioned_docs/version-3.6.0/Examples/bundles.md","tags":[],"version":"3.6.0","lastUpdatedBy":"Jasper De Keukelaere (imec)","lastUpdatedAt":1765142882000,"frontMatter":{"title":"Bundles","sidebar_label":"Bundles","description":"This section describe examples on how to use a Kairos bundle to deploy MetalLB on top of K3s"},"sidebar":"tutorialSidebar","previous":{"title":"Bandwidth Optimized Upgrades","permalink":"/docs/3.6.0/Examples/bandwidth-optimized-upgrades"},"next":{"title":"Using Kairos Core Images as an Installer","permalink":"/docs/3.6.0/Examples/core"}}');var o=s(74848),i=s(28453);const l={title:"Bundles",sidebar_label:"Bundles",description:"This section describe examples on how to use a Kairos bundle to deploy MetalLB on top of K3s"},a=void 0,r={},d=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation",id:"installation",level:2}];function u(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["Welcome to the guide on setting up MetalLB on a Kairos cluster with K3s! This tutorial will walk you through the steps of using a Kairos ",(0,o.jsx)(n.a,{href:"../../advanced/bundles",children:"bundle"})," to automatically configure MetalLB on your local network with an IP range of ",(0,o.jsx)(n.code,{children:"192.168.1.10-192.168.1.20"}),". Check out the ",(0,o.jsx)(n.a,{href:"../../examples/metallb",children:"MetalLB"})," example to configure it without a ",(0,o.jsx)(n.a,{href:"../../advanced/bundles",children:"bundle"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["For those unfamiliar with ",(0,o.jsx)(n.a,{href:"https://metallb.universe.tf/",children:"MetalLB"}),", it is an open-source load balancer implementation for bare metal Kubernetes clusters that utilizes standard routing protocols. When used with K3s on Kairos, it provides load balancing capabilities and helps manage IP addresses within a cluster."]}),"\n",(0,o.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsx)(n.p,{children:"Before we begin, you will need to have the following:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"A Kairos standard image which includes K3s"}),"\n",(0,o.jsx)(n.li,{children:"A baremetal node to run the installation"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Follow the ",(0,o.jsx)(n.a,{href:"../../installation",children:"Installation"})," documentation for Kairos."]}),"\n",(0,o.jsx)(n.li,{children:"Use the following cloud configuration file when setting up Kairos:"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"#cloud-config\n\nhostname: metal-{{ trunc 4 .MachineID }}\nusers:\n- name: kairos\n  # Change to your pass here\n  passwd: kairos\n  groups:\n  - admin\n  ssh_authorized_keys:\n  # Replace with your github user and un-comment the line below:\n  # - github:mudler\n\nk3s:\n  enabled: true\n  args:\n  - --disable=traefik,servicelb\n\n# Specify the bundle to use\nbundles:\n- targets:\n  - run://quay.io/kairos/community-bundles:metallb_latest\n\n# Specify metallb settings, available only with the bundle.\nmetallb:\n  version: 0.13.7\n  address_pool: 192.168.1.10-192.168.1.20\n"})}),"\n",(0,o.jsx)(n.p,{children:"There are a few key points to note in the configuration file:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"metallb"})," block is provided by the MetalLB bundle and allows us to specify the version of MetalLB that we want to deploy, as well as the ",(0,o.jsx)(n.code,{children:"address_pool"})," available for our services."]}),"\n",(0,o.jsxs)(n.li,{children:["The ",(0,o.jsx)(n.code,{children:"bundles"})," block enables the ",(0,o.jsx)(n.code,{children:"run"})," ",(0,o.jsx)(n.a,{href:"../../advanced/bundles",children:"bundle"})," type. The bundle we are using is part of the ",(0,o.jsx)(n.a,{href:"https://github.com/kairos-io/community-bundles",children:"community-bundles"})," repository."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["And that's it! With these steps, you should now have MetalLB configured and ready to use on your Kairos cluster. If you have any questions or run into any issues, don't hesitate to check out the ",(0,o.jsx)(n.a,{href:"../../advanced/bundles",children:"bundle documentation"})," or reach out to the community for support."]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}}}]);