"use strict";(globalThis.webpackChunkkairos_docs=globalThis.webpackChunkkairos_docs||[]).push([[9498],{11470:(e,n,t)=>{t.d(n,{A:()=>A});var r=t(96540),a=t(34164),s=t(17559),o=t(23104),i=t(56347),l=t(205),c=t(57485),d=t(31682),u=t(70679);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:n,children:t}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r}))}(t);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function f({queryString:e=!1,groupId:n}){const t=(0,i.W6)(),a=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(a),(0,r.useCallback)(e=>{if(!a)return;const n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})},[a,t])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,s=m(e),[o,i]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s})),[c,d]=f({queryString:t,groupId:a}),[h,b]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,a]=(0,u.Dv)(n);return[t,(0,r.useCallback)(e=>{n&&a.set(e)},[n,a])]}({groupId:a}),g=(()=>{const e=c??h;return p({value:e,tabValues:s})?e:null})();(0,l.A)(()=>{g&&i(g)},[g]);return{selectedValue:o,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),d(e),b(e)},[d,b,s]),tabValues:s}}var g=t(92303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var w=t(74848);function k({className:e,block:n,selectedValue:t,selectValue:r,tabValues:s}){const i=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=e=>{const n=e.currentTarget,a=i.indexOf(n),o=s[a].value;o!==t&&(l(n),r(o))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=i.indexOf(e.currentTarget)+1;n=i[t]??i[0];break}case"ArrowLeft":{const t=i.indexOf(e.currentTarget)-1;n=i[t]??i[i.length-1];break}}n?.focus()};return(0,w.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},e),children:s.map(({value:e,label:n,attributes:r})=>(0,w.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{i.push(e)},onKeyDown:d,onClick:c,...r,className:(0,a.A)("tabs__item",v.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function y({lazy:e,children:n,selectedValue:t}){const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,w.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function x(e){const n=b(e);return(0,w.jsxs)("div",{className:(0,a.A)(s.G.tabs.container,"tabs-container",v.tabList),children:[(0,w.jsx)(k,{...n,...e}),(0,w.jsx)(y,{...n,...e})]})}function A(e){const n=(0,g.A)();return(0,w.jsx)(x,{...e,children:h(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>o});t(96540);var r=t(34164);const a={tabItem:"tabItem_Ymn6"};var s=t(74848);function o({children:e,hidden:n,className:t}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,t),hidden:n,children:e})}},27710:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>l,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"Advanced/networking","title":"Networking","description":"By default, Kairos ISOs are configured to automatically get an IP from the network interface. However, depending on the base system you have chosen, there are different way to configure networking. This section collects information on setting network configuration depending on the base that is being chosen (openSUSE, Alpine, Ubuntu).","source":"@site/docs/Advanced/networking.md","sourceDirName":"Advanced","slug":"/Advanced/networking","permalink":"/docs/next/Advanced/networking","draft":false,"unlisted":false,"editUrl":"https://github.com/kairos-io/kairos-docs/tree/main/docs/Advanced/networking.md","tags":[],"version":"current","lastUpdatedBy":"Jasper De Keukelaere (imec)","lastUpdatedAt":1765043763000,"sidebarPosition":3,"frontMatter":{"title":"Networking","sidebar_label":"Networking","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Build","permalink":"/docs/next/Advanced/build"},"next":{"title":"Extending the system with systemd extensions","permalink":"/docs/next/Advanced/sys-extensions"}}');var a=t(74848),s=t(28453),o=t(11470),i=t(19365);const l={title:"Networking",sidebar_label:"Networking",sidebar_position:3},c=void 0,d={},u=[{value:"Static IP",id:"static-ip",level:2},{value:"Bonding",id:"bonding",level:2},{value:"References",id:"references",level:3}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:"By default, Kairos ISOs are configured to automatically get an IP from the network interface. However, depending on the base system you have chosen, there are different way to configure networking. This section collects information on setting network configuration depending on the base that is being chosen (openSUSE, Alpine, Ubuntu)."}),"\n",(0,a.jsx)(n.p,{children:"There are different network managers depending on the distro:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"connman"})," is available on Alpine-based distribution. By default is enabled on Kairos Alpine flavored variants."]}),"\n",(0,a.jsxs)(n.li,{children:["systemd-based flavors are all using ",(0,a.jsx)(n.code,{children:"systemd-networkd"})]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"static-ip",children:"Static IP"}),"\n",(0,a.jsx)(n.p,{children:"To get a static IP, you can additionally define the following in your configuration file, depending on the network-manager being used:"}),"\n","\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(i.A,{value:"connman",label:"connman",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"stages:\n  initramfs:\n    - files:\n        - path: /var/lib/connman/default.config\n          permissions: 0644\n          content: |\n            [service_eth0]\n            Type = ethernet\n            IPv4 = 192.168.122.170/255.255.255.0/192.168.122.1\n            IPv6 = off\n            Nameservers = 1.1.1.1\n"})})}),(0,a.jsx)(i.A,{value:"systemd-networkd",label:"systemd-networkd",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"stages:\n  initramfs:\n    - files:\n        - path: /etc/systemd/network/01-man.network\n          permissions: 0644\n          content: |\n            [Match]\n            Name=ens18\n\n            [Network]\n            Address=10.1.1.1/16\n            Gateway=10.1.0.1\n            DNS=10.1.0.1\n"})})})]}),"\n",(0,a.jsx)(n.h2,{id:"bonding",children:"Bonding"}),"\n",(0,a.jsx)(n.p,{children:"Bonding setup with Ubuntu can be configured via systemd-networkd (Ubuntu based images) and wicked (openSUSE based images), consider the following examples:"}),"\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(i.A,{value:"systemd-networkd",label:"systemd-networkd",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'#cloud-config\nname: "My Deployment"\nstages:\n  boot:\n    - name: "Setup network"\n      commands:\n        - systemctl restart systemd-networkd\n  initramfs:\n    # Drop network config file\n    - name: "Setup hostname"\n      hostname: "hostname"\n    - name: "Setup network files"\n      files:\n        - path: /etc/systemd/network/10-bond0.network\n          content: |\n            [Match]\n            Name=bond0\n            [Network]\n            DHCP=yes\n          permissions: 0644\n          owner: 0\n          group: 0\n        - path: /etc/systemd/network/10-bond0.netdev\n          content: |\n            [NetDev]\n            Name=bond0\n            Kind=bond\n            [Bond]\n            Mode=802.3ad\n          permissions: 0644\n          owner: 0\n          group: 0\n        - path: /etc/systemd/network/15-enp.network\n          content: |\n            [Match]\n            Name=enp*\n            [Network]\n            Bond=bond0\n          permissions: 0644\n          owner: 0\n          group: 0\n        - path: /etc/systemd/network/05-bond0.link\n          content: |\n            [Match]\n            Driver=bonding\n            Name=bond0\n            [Link]\n            MACAddress=11:22:33:44:55:66\n          permissions: 0644\n          owner: 0\n          group: 0\n  network:\n    - name: "Setup user ssh-keys"\n      authorized_keys:\n        kairos:\n          - "ssh-rsa AAA..."\n          - "ssh-rsa AAA..."\n# k3s settings\nk3s-agent:\n  enabled: true\n  env:\n    K3S_TOKEN: "KubeSecret"\n    K3S_URL: https://hostname:6443\n'})})}),(0,a.jsx)(i.A,{value:"connman",label:"connman",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'stages:\n   boot:\n     - name: "Setup network"\n       commands:\n       - modprobe bonding mode=4 miimon=100\n       - ifenslave bond0 eno1\n       - ifenslave bond0 eno2\n       - ifenslave bond0 eno3\n       - ifenslave bond0 eno4\n       - ifconfig bond0 up hw ether 11:22:33:44:55:66\n       - ifup bond0\n       - sleep 5\n       - rc-service connman restart \n   initramfs:\n     - name: "Setup network files"\n       files:\n       - path: /var/lib/connman/default.config\n         content: |\n            [service_eth]\n            Type = ethernet\n            IPv4 = off\n            IPv6 = off\n\n            [service_bond0]\n            Type = ethernet\n            DeviceName = bond0\n            IPv4 = dhcp\n            MAC = 11:22:33:44:55:66\n         permissions: 0644\n         owner: 0\n         group: 0\n'})})})]}),"\n",(0,a.jsx)(n.h3,{id:"references",children:"References"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://kerlilow.me/blog/setting-up-systemd-networkd-with-bonding/",children:"https://kerlilow.me/blog/setting-up-systemd-networkd-with-bonding/"})}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var r=t(96540);const a={},s=r.createContext(a);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);