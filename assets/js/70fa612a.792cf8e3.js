"use strict";(globalThis.webpackChunkkairos_docs=globalThis.webpackChunkkairos_docs||[]).push([[6117],{28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var i=n(96540);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}},45856:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Advanced/private_registry_auth","title":"Private registries authentication","description":"As the source for install or upgrade can be an OCI image and sometimes those are behind a private container registry, Kairos","source":"@site/docs/Advanced/private_registry_auth.md","sourceDirName":"Advanced","slug":"/Advanced/private_registry_auth","permalink":"/kairos-docs/docs/next/Advanced/private_registry_auth","draft":false,"unlisted":false,"editUrl":"https://github.com/kairos-io/kairos-docs/tree/main/docs/Advanced/private_registry_auth.md","tags":[],"version":"current","lastUpdatedBy":"Jasper De Keukelaere (imec)","lastUpdatedAt":1765146647000,"sidebarPosition":2,"frontMatter":{"title":"Private registries authentication","sidebar_label":"Private registries authentication","sidebar_position":2,"date":"2023-08-08T00:00:00.000Z"},"sidebar":"tutorialSidebar","previous":{"title":"Customization","permalink":"/kairos-docs/docs/next/Advanced/customizing"},"next":{"title":"Using /opt with System Extensions","permalink":"/kairos-docs/docs/next/Advanced/adding_opt_to_system_extensions"}}');var r=n(74848),s=n(28453);const o={title:"Private registries authentication",sidebar_label:"Private registries authentication",sidebar_position:2,date:new Date("2023-08-08T00:00:00.000Z")},a=void 0,c={},d=[];function l(e){const t={a:"a",admonition:"admonition",code:"code",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.p,{children:"As the source for install or upgrade can be an OCI image and sometimes those are behind a private container registry, Kairos\nimplements the default basic authentication used by docker for private registries."}),"\n",(0,r.jsx)(t.p,{children:"To install/upgrade with a container image behind a registry with authentication, Kairos reads the following files in order to find about registry auth:"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.code,{children:"XDG_CONFIG_HOME/.docker/config.json"})}),"\n",(0,r.jsxs)(t.li,{children:["If set, DOCKER_CONFIG environment variable which points to a directory ",(0,r.jsx)(t.a,{href:"https://docs.docker.com/reference/cli/docker/#environment-variables",children:"as per the docs"}),"."]}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.code,{children:"XDG_RUNTIME_DIR/containers/auth.json"})," for podman"]}),"\n"]}),"\n",(0,r.jsxs)(t.admonition,{title:"Note",type:"info",children:[(0,r.jsxs)(t.p,{children:["If you are using ",(0,r.jsx)(t.code,{children:"sudo"})," to perform the upgrade, you have a couple of options:"]}),(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["You can create the file ",(0,r.jsx)(t.code,{children:"/root/.docker/config.json"})," with your credentials."]}),"\n",(0,r.jsxs)(t.li,{children:["You can use ",(0,r.jsx)(t.code,{children:"sudo --preserve-env"})," to give ",(0,r.jsx)(t.code,{children:"sudo"})," access to the relevant environment variables."]}),"\n"]})]}),"\n",(0,r.jsxs)(t.p,{children:["See the ",(0,r.jsx)(t.a,{href:"https://docs.docker.com/engine/reference/commandline/login/",children:"login docs for docker"})," or the ",(0,r.jsx)(t.a,{href:"https://docs.podman.io/en/latest/markdown/podman-login.1.html",children:"login docs for podman"})," for more information."]}),"\n",(0,r.jsx)(t.p,{children:"You can also just generate that file yourself with the proper auth parameters like so:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n\t"auths": {\n\t\t"registry.example.com": {\n\t\t\t"auth": "a2Fpcm9zOmh1bnRlcjIK"\n\t\t}\n\t}\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"The auths map has an entry per registry, and the auth field contains your username and password encoded as HTTP 'Basic' Auth."}),"\n",(0,r.jsxs)(t.p,{children:["NOTE: This means that your credentials are stored in plaintext. Have a look at the docker docs for the ",(0,r.jsx)(t.a,{href:"https://docs.docker.com/engine/reference/commandline/login/#credentials-store",children:"credentials-store"})]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}}}]);