"use strict";(globalThis.webpackChunkkairos_docs=globalThis.webpackChunkkairos_docs||[]).push([[5989],{4474:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"Installation/check-the-signatures","title":"Check the Signatures","description":"Verify the integrity of the ISO by checking the signatures.\\n","source":"@site/docs/Installation/check-the-signatures.md","sourceDirName":"Installation","slug":"/Installation/check-the-signatures","permalink":"/kairos-docs/docs/next/Installation/check-the-signatures","draft":false,"unlisted":false,"editUrl":"https://github.com/kairos-io/kairos-docs/tree/main/docs/Installation/check-the-signatures.md","tags":[],"version":"current","lastUpdatedBy":"Jasper De Keukelaere (imec)","lastUpdatedAt":1765043763000,"sidebarPosition":1,"frontMatter":{"title":"Check the Signatures","sidebar_label":"Check the Signatures","sidebar_position":1,"description":"Verify the integrity of the ISO by checking the signatures.\\n"},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/kairos-docs/docs/next/category/installation"},"next":{"title":"Interactive","permalink":"/kairos-docs/docs/next/Installation/interactive"}}');var n=t(74848),a=t(28453);const o={title:"Check the Signatures",sidebar_label:"Check the Signatures",sidebar_position:1,description:"Verify the integrity of the ISO by checking the signatures.\n"},r=void 0,c={},h=[{value:"Check the Signatures",id:"check-the-signatures",level:2}];function l(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h2,{id:"check-the-signatures",children:"Check the Signatures"}),"\n",(0,n.jsx)(i.admonition,{title:"Optional Step",type:"tip",children:(0,n.jsx)(i.p,{children:"This is an optional but strongly encouraged step for security reasons."})}),"\n",(0,n.jsx)(i.p,{children:"Our ISO releases have sha256 files to checksum the validity of the artifacts. At the same time, our sha256 files are signed automatically in the CI during the release workflow to verify that they haven't been tampered with, adding an extra step to the supply chain."}),"\n",(0,n.jsx)(i.p,{children:"It is recommended that before starting any installation the whole security chain is validated by verifying our sha256 signature and validating that the checksum matches with the download artifacts."}),"\n",(0,n.jsx)(i.p,{children:"To validate the whole chain you need:"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"sha256sum"})," which is usually installed by default on most linux distributions."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"cosign"})," to verify the signatures of the sha256 file. You can install cosign via their ",(0,n.jsx)(i.a,{href:"https://docs.sigstore.dev/cosign/installation/",children:"installation docs"})]}),"\n",(0,n.jsxs)(i.li,{children:["sha256, certificate and signature files that you want to verify","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{}),"\n",(0,n.jsx)(i.li,{}),"\n",(0,n.jsx)(i.li,{}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["In this example we will use the ",(0,n.jsx)(i.code,{children:"latest"})," version and  flavor and  flavor release."]}),"\n",(0,n.jsx)(i.p,{children:"First we check that we have all needed files:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-bash",children:'$ ls      \n\x3c!-- Hugo shortcode: image variant="core" suffix=".iso" --\x3e         \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.pem" --\x3e\n\x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256" --\x3e  \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.sig" --\x3e\n'})}),"\n",(0,n.jsx)(i.admonition,{title:"Cosign version Step",type:"tip",children:(0,n.jsx)(i.p,{children:"We recommend using the latest cosign version, at the time of writing, 2.5.0"})}),"\n",(0,n.jsx)(i.p,{children:"Then we verify that the sha256 checksums haven't been tampered with (substitute $VERSION with the exact Kairos version you are verifying as the certificate identity is the release job that signs it):"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-bash",children:'$ cosign verify-blob --cert \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.pem" --\x3e --signature \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.sig" --\x3e --certificate-identity https://github.com/kairos-io/kairos/.github/workflows/reusable-release.yaml@refs/tags/$VERSION --certificate-oidc-issuer https://token.actions.githubusercontent.com \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256" --\x3e \nVerified OK\n'})}),"\n",(0,n.jsxs)(i.p,{children:["Once we see that ",(0,n.jsx)(i.code,{children:"Verified OK"})," we can be sure that the file hasn't been tampered with, and we can continue verifying the iso checksum."]}),"\n",(0,n.jsx)(i.p,{children:"For an example of a failure validation see below:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-bash",children:'$ cosign verify-blob --cert \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.pem" --\x3e --signature \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.sig" --\x3e --certificate-identity https://github.com/kairos-io/kairos/.github/workflows/reusable-release.yaml@refs/tags/$VERSION --certificate-oidc-issuer https://token.actions.githubusercontent.com \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.modified" --\x3e \nError: verifying blob [\x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.modified" --\x3e]: invalid signature when validating ASN.1 encoded signature\nmain.go:62: error during command execution: verifying blob [\x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256.modified" --\x3e]: invalid signature when validating ASN.1 encoded signature\n'})}),"\n",(0,n.jsx)(i.p,{children:"Now we can verify that the integrity of the ISO hasnt been compromise:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{className:"language-bash",children:'$ sha256sum -c \x3c!-- Hugo shortcode: image variant="core" suffix=".iso.sha256" --\x3e\n\x3c!-- Hugo shortcode: image variant="core" suffix=".iso" --\x3e: OK\n'})}),"\n",(0,n.jsx)(i.p,{children:"Once we reached this point, we can be sure that from the ISO hasn't been tampered with since it was created by our release workflow."})]})}function d(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,i,t)=>{t.d(i,{R:()=>o,x:()=>r});var s=t(96540);const n={},a=s.createContext(n);function o(e){const i=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),s.createElement(a.Provider,{value:i},e.children)}}}]);