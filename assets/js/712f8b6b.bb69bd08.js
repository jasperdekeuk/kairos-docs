"use strict";(globalThis.webpackChunkkairos_docs=globalThis.webpackChunkkairos_docs||[]).push([[7157],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var i=n(96540);const o={},s=i.createContext(o);function a(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:t},e.children)}},76982:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"Installation/qrcode","title":"QR Code","description":"Use the QR code displayed at boot to drive the installation","source":"@site/versioned_docs/version-3.6.0/Installation/qrcode.md","sourceDirName":"Installation","slug":"/Installation/qrcode","permalink":"/docs/3.6.0/Installation/qrcode","draft":false,"unlisted":false,"editUrl":"https://github.com/kairos-io/kairos-docs/tree/main/versioned_docs/version-3.6.0/Installation/qrcode.md","tags":[],"version":"3.6.0","lastUpdatedBy":"Jasper De Keukelaere (imec)","lastUpdatedAt":1765142882000,"sidebarPosition":2,"frontMatter":{"title":"QR Code","sidebar_label":"QR Code","sidebar_position":2,"date":"2022-11-13T00:00:00.000Z","description":"Use the QR code displayed at boot to drive the installation"},"sidebar":"tutorialSidebar","previous":{"title":"Manual installation","permalink":"/docs/3.6.0/Installation/manual"},"next":{"title":"WebUI","permalink":"/docs/3.6.0/Installation/webui"}}');var o=n(74848),s=n(28453);const a={title:"QR Code",sidebar_label:"QR Code",sidebar_position:2,date:new Date("2022-11-13T00:00:00.000Z"),description:"Use the QR code displayed at boot to drive the installation"},r=void 0,d={},l=[];function c(e){const t={a:"a",admonition:"admonition",code:"code",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.admonition,{title:"Warning",type:"warning",children:(0,o.jsx)(t.p,{children:"You will need a Standard Kairos OS image in order to use QR Code feature."})}),"\n",(0,o.jsx)(t.p,{children:"By default Kairos will display a QR code after booting the ISO to install the machine:"}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{src:"https://user-images.githubusercontent.com/2420543/189219806-29b4deed-b4a1-4704-b558-7a60ae31caf2.gif",alt:"livecd"})}),"\n",(0,o.jsxs)(t.p,{children:["The QR Code is a base64 encoded string which is an ",(0,o.jsx)(t.a,{href:"https://github.com/mudler/edgevpn",children:(0,o.jsx)(t.code,{children:"edgevpn"})})," token.\nFor example, you can scan the following QR Code from the video ",(0,o.jsx)(t.a,{href:"https://youtu.be/WzKf6WrL3nE?t=256",children:"Introduction to Kairos - timestamp 4:16"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"The base64 encoded string from the QR Code looks like this:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"b3RwOgogIGRodDoKICAgIGludGVydmFsOiA5MjIzMzcyMDM2ODU0Nzc1ODA3CiAgICBrZXk6IFY0NTYzWUhKNzdNVFZaMkVNRFk1QVZINklDNk1UNkU0MjdMVE1OQ1MyTVhWM1FWR1VESVEKICAgIGxlbmd0aDogMzIKICBjcnlwdG86CiAgICBpbnRlcnZhbDogOTIyMzM3MjAzNjg1NDc3NTgwNwogICAga2V5OiBNUlZTU05KQ09WWjYyV0dETFlXRE9OUkNDUTU0TEFVMkxMRkVONURNNERHTFlGWEZYVTRBCiAgICBsZW5ndGg6IDMyCnJvb206IDI3V0pWN1lNSzdXUzdRWVUzV0xPSVNRQUxZT0dFUjRRNUpNVVRVUk1UREZKS0E1NVZZWUEKcmVuZGV6dm91czogcWZNcHRBdFRzaUhxVmZWSEJhaXRBbXZQZFdySkJEcEMKbWRuczogSFB0WmlsSUp4UFhiUVRUSE93ZHhiWGZ4S3JvVmJmZEgKbWF4X21lc3NhZ2Vfc2l6ZTogMjA5NzE1MjAK\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Once this base64 string is decoded, the ",(0,o.jsxs)(t.a,{href:"https://github.com/mudler/edgevpn/blob/master/docs/content/en/docs/Concepts/Token/_index",children:[(0,o.jsx)(t.code,{children:"edgevpn"})," token"]})," looks like this:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-yaml",children:"otp:\n  dht:\n    interval: 9223372036854775807\n    key: V4563YHJ77MTVZ2EMDY5AVH6IC6MT6E427LTMNCS2MXV3QVGUDIQ\n    length: 32\n  crypto:\n    interval: 9223372036854775807\n    key: MRVSSNJCOVZ62WGDLYWDONRCCQ54LAU2LLFEN5DM4DGLYFXFXU4A\n    length: 32\nroom: 27WJV7YMK7WS7QYU3WLOISQALYOGER4Q5JMUTURMTDFJKA55VYYA\nrendezvous: qfMptAtTsiHqVfVHBaitAmvPdWrJBDpC\nmdns: HPtZilIJxPXbQTTHOwdxbXfxKroVbfdH\nmax_message_size: 20971520\n"})}),"\n",(0,o.jsxs)(t.p,{children:["For more information about EdgeVPN, ",(0,o.jsx)(t.a,{href:"./../architecture/network",children:"check out the architecture section"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["To trigger the installation process via QR code, you need to use the Kairos CLI and provide a Cloud Config, as described in the ",(0,o.jsx)(t.a,{href:"/getting-started",children:"Getting started guide"}),". You can also see some Cloud Config examples in our ",(0,o.jsx)(t.a,{href:"./examples",children:"Examples section"}),". The CLI is currently available only for Linux and Windows. It can be downloaded from the release artifact:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"VERSION=$(wget -q -O- https://api.github.com/repos/kairos-io/provider-kairos/releases/latest | jq -r '.tag_name')\ncurl -L https://github.com/kairos-io/provider-kairos/releases/download/${VERSION}/kairosctl-${VERSION}-linux-amd64.tar.gz -o - | tar -xvzf - -C .\n"})}),"\n",(0,o.jsx)(t.p,{children:"The CLI allows to register a node with a screenshot, an image, or a token. During pairing, the configuration is sent over, and the node will continue the installation process."}),"\n",(0,o.jsx)(t.p,{children:"In a terminal window from your desktop/workstation, run:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{children:"kairosctl register --reboot --device /dev/sda --config config.yaml\n"})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.code,{children:"--reboot"})," flag will make the node reboot automatically after the installation is completed."]}),"\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.code,{children:"--device"})," flag determines the specific drive where Kairos will be installed. Replace ",(0,o.jsx)(t.code,{children:"/dev/sda"})," with your drive. Any existing data will be overwritten, so please be cautious."]}),"\n",(0,o.jsxs)(t.li,{children:["The ",(0,o.jsx)(t.code,{children:"--config"})," flag is used to specify the config file used by the installation process."]}),"\n"]}),"\n",(0,o.jsx)(t.admonition,{title:"Note",type:"note",children:(0,o.jsxs)(t.p,{children:["By default, the CLI will automatically take a screenshot to get the QR code. Make sure it fits into the screen. Alternatively, an image path or a token can be supplied via arguments (e.g. ",(0,o.jsx)(t.code,{children:"kairosctl register /img/path"})," or ",(0,o.jsx)(t.code,{children:"kairosctl register <token>"}),")."]})}),"\n",(0,o.jsx)(t.p,{children:"After a few minutes, the configuration is distributed to the node and the installation starts. At the end of the installation, the system is automatically rebooted."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);